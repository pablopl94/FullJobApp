<div class="btn-volver-container">
  <button class="btn btn-sm btn-outline-dark" routerLink="/">
    Volver al Inicio
  </button>
</div>
<div class="registro-container">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="registro-form">
    <h2 class="form-title">Crea tu cuenta</h2>

  <div class="mb-3">
    <label class="form-label">Nombre</label>
    <input type="text" class="form-control" formControlName="nombre"
          [ngClass]="{'is-invalid': form.get('nombre')?.touched && form.get('nombre')?.invalid}" />
    @if (form.get('nombre')?.touched && form.get('nombre')?.hasError('required')) {
      <small class="text-danger">Este campo es obligatorio.</small>
    } @else if (form.get('nombre')?.hasError('minlength')) {
      <small class="text-danger">Debe tener al menos 2 caracteres.</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Apellidos</label>
    <input type="text" class="form-control" formControlName="apellidos"
          [ngClass]="{'is-invalid': form.get('apellidos')?.touched && form.get('apellidos')?.invalid}" />
    @if (form.get('apellidos')?.touched && form.get('apellidos')?.invalid) {
      <small class="text-danger">Este campo es obligatorio.</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Email</label>
    <input type="email" class="form-control" formControlName="email"
          [ngClass]="{'is-invalid': form.get('email')?.touched && form.get('email')?.invalid}" />
    @if (form.get('email')?.touched && form.get('email')?.hasError('required')) {
      <small class="text-danger">Este campo es obligatorio.</small>
    } @else if (form.get('email')?.hasError('email')) {
      <small class="text-danger">Formato de email inválido.</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Contraseña</label>
    <input type="password" class="form-control" formControlName="password"
          [ngClass]="{'is-invalid': form.get('password')?.touched && form.get('password')?.invalid}" />
    @if (form.get('password')?.touched && form.get('password')?.hasError('required')) {
      <small class="text-danger">Este campo es obligatorio.</small>
    } @else if (form.get('password')?.hasError('minlength')) {
      <small class="text-danger">Debe tener mínimo 6 caracteres.</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Confirmar contraseña</label>
    <input type="password" class="form-control" formControlName="confirmar"
            [ngClass]="{
              'is-invalid': form.get('confirmar')?.touched &&
                            (form.get('confirmar')?.invalid || form.value.password !== form.value.confirmar)
            }" />
    @if (form.get('confirmar')?.touched && form.get('confirmar')?.hasError('required')) {
      <small class="text-danger">Este campo es obligatorio.</small>
    } @else if (form.get('confirmar')?.touched && form.value.password !== form.value.confirmar) {
      <small class="text-danger">Las contraseñas no coinciden.</small>
    }
  </div>

  <button type="submit" [disabled]="form.invalid || form.value.password !== form.value.confirmar">
    CREAR CUENTA
  </button>

  @if (mensaje) {
    <p class="mt-3 text-danger text-center">{{ mensaje }}</p>
  }
</form>
